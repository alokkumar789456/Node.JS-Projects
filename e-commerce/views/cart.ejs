<!-- <!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/cart.css">
    <link href="./output.css" rel="stylesheet">
    <title>Your Cart</title>
</head>
<body>
    <div class="cart-container">
        <h1>Your Cart</h1>
        <div class="product-details">
            <img src="<%= product.image %>" alt="<%= product.title %>" />
            <h3><%= product.title %></h3>
            <p><strong>Price:</strong> $<%= product.price %></p>
        </div>

        <h2>Current Address:</h2>
        <p><%= currentAddress || 'No address available.' %></p>
        

        <h2>Select Payment Method:</h2>
        <form action="/cart/confirm" method="POST" id="orderForm">
            <label>
                <input type="radio" name="paymentMethod" value="UPI" disabled> UPI
                <span style="color: red;">(Currently unavailable)</span>
            </label>
            <label>
                <input type="radio" name="paymentMethod" value="COD" required> Cash on Delivery (COD)
            </label>

            <input type="hidden" name="productId" value="<%= product.id %>">

            <h2>Shipping Address:</h2>
            <div>
                <h3>Current Address:</h3>
                <label>
                    <input type="checkbox" name="useCurrentAddress" id="useCurrentAddress" checked>
                    Use Current Address
                </label>
            </div>

            <div id="newAddressSection">
                <h3>New Address:</h3>
                <label>Name:</label>
                <input type="text" name="name" id="nameInput" placeholder="Enter your name" required>
                
                <label>Email:</label>
                <input type="email" name="email" id="emailInput" placeholder="Enter your email" required>
                
                <label>Phone:</label>
                <input type="text" name="phone" id="phoneInput" placeholder="Enter your phone number" required>
                
                <label>City:</label>
                <input type="text" name="city" id="cityInput" placeholder="Enter your city" required>
                
                <label>State:</label>
                <input type="text" name="state" id="stateInput" placeholder="Enter your state" required>
                
                <label>Pincode:</label>
                <input type="text" name="pincode" id="pincodeInput" placeholder="Enter your pincode" required>
                
                <label>Country:</label>
                <input type="text" name="country" id="countryInput" placeholder="Enter your country" required>
            </div>

            <button type="submit" id="confirmOrderButton">Confirm Order</button>
        </form>
    </div>
    <script src="/javascript/script.js"></script>
    <script>
        const useCurrentAddressCheckbox = document.getElementById("useCurrentAddress");
        const newAddressInputs = {
            name: document.getElementById("nameInput"),
            email: document.getElementById("emailInput"),
            phone: document.getElementById("phoneInput"),
            city: document.getElementById("cityInput"),
            state: document.getElementById("stateInput"),
            pincode: document.getElementById("pincodeInput"),
            country: document.getElementById("countryInput"),
        };

        // Populate inputs based on checkbox status
        function toggleAddressFields() {
            if (useCurrentAddressCheckbox.checked) {
                newAddressInputs.name.value = "<%= user.name %>";
                newAddressInputs.email.value = "<%= user.email %>";
                newAddressInputs.phone.value = "<%= user.phone %>";
                newAddressInputs.city.value = "<%= user.city %>";
                newAddressInputs.state.value = "<%= user.state %>";
                newAddressInputs.pincode.value = "<%= user.pincode %>";
                newAddressInputs.country.value = "<%= user.country %>";
            } else {
                for (let key in newAddressInputs) {
                    newAddressInputs[key].value = "";
                }
            }
        }

        useCurrentAddressCheckbox.addEventListener("change", toggleAddressFields);
        toggleAddressFields();
    </script>
</body>
</html>  -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/cart.css">
    <link href="./output.css" rel="stylesheet">
    <title>Your Cart</title>
</head>
<body class="bg-gray-100 p-6">
    <div class="max-w-lg mx-auto bg-white p-6 rounded-lg shadow-md">
        <h1 class="text-3xl font-bold text-center mb-6">Your Cart</h1>
        
        <div class="flex mb-6">
            <img src="<%= product.image %>" alt="<%= product.title %>" class="w-32 h-32 object-cover mr-4" />
            <div>
                <h3 class="text-xl font-semibold"><%= product.title %></h3>
                <p class="text-lg"><strong>Price:</strong> $<%= product.price %></p>
            </div>
        </div>

        <h2 class="text-xl font-semibold mb-2">Current Address:</h2>
        <p class="text-gray-700"><%= currentAddress || 'No address available.' %></p>
        
        <h2 class="text-xl font-semibold mb-2">Select Payment Method:</h2>
        <form action="/cart/confirm" method="POST" id="orderForm">
            <div class="mb-4">
                <label class="block mb-1">
                    <input type="radio" name="paymentMethod" value="UPI" disabled class="mr-2">
                    UPI <span class="text-red-500">(Currently unavailable)</span>
                </label>
                <label class="block mb-1">
                    <input type="radio" name="paymentMethod" value="COD" required class="mr-2">
                    Cash on Delivery (COD)
                </label>
            </div>

            <input type="hidden" name="productId" value="<%= product.id %>">

            <h2 class="text-xl font-semibold mb-2">Shipping Address:</h2>
            <div class="mb-4">
                <h3 class="text-lg">Current Address:</h3>
                <label class="flex items-center">
                    <input type="checkbox" name="useCurrentAddress" id="useCurrentAddress" class="mr-2">
                    Use Current Address
                </label>
            </div>

            <div id="newAddressSection" class="mb-4">
                <h3 class="text-lg">New Address:</h3>
                <label class="block mb-2">Name:</label>
                <input type="text" name="name" id="nameInput" placeholder="Enter your name" required class="border rounded p-2 w-full mb-4">
                
                <label class="block mb-2">Email:</label>
                <input type="email" name="email" id="emailInput" placeholder="Enter your email" required class="border rounded p-2 w-full mb-4">
                
                <label class="block mb-2">Phone:</label>
                <input type="text" name="phone" id="phoneInput" placeholder="Enter your phone number" required class="border rounded p-2 w-full mb-4">
                
                <label class="block mb-2">City:</label>
                <input type="text" name="city" id="cityInput" placeholder="Enter your city" required class="border rounded p-2 w-full mb-4">
                
                <label class="block mb-2">State:</label>
                <input type="text" name="state" id="stateInput" placeholder="Enter your state" required class="border rounded p-2 w-full mb-4">
                
                <label class="block mb-2">Pincode:</label>
                <input type="text" name="pincode" id="pincodeInput" placeholder="Enter your pincode" required class="border rounded p-2 w-full mb-4">
                
                <label class="block mb-2">Country:</label>
                <input type="text" name="country" id="countryInput" placeholder="Enter your country" required class="border rounded p-2 w-full mb-4">
            </div>

            <button type="submit" id="confirmOrderButton" class="w-full bg-yellow-500 text-white font-bold py-2 rounded hover:bg-yellow-600">Confirm Order</button>
        </form>
    </div>
    
    <script src="/javascript/script.js"></script>
    <script>
        const useCurrentAddressCheckbox = document.getElementById("useCurrentAddress");
        const nameInput = document.getElementById("nameInput");
        const emailInput = document.getElementById("emailInput");
        const phoneInput = document.getElementById("phoneInput");
        const cityInput = document.getElementById("cityInput");
        const stateInput = document.getElementById("stateInput");
        const pincodeInput = document.getElementById("pincodeInput");
        const countryInput = document.getElementById("countryInput");

        // Populate the address fields with the current address
        const populateAddress = () => {
            nameInput.value = "<%= currentAddress.name || '' %>";
            emailInput.value = "<%= currentAddress.email || '' %>";
            phoneInput.value = "<%= currentAddress.phone || '' %>";
            cityInput.value = "<%= currentAddress.city || '' %>";
            stateInput.value = "<%= currentAddress.state || '' %>";
            pincodeInput.value = "<%= currentAddress.pincode || '' %>";
            countryInput.value = "<%= currentAddress.country || '' %>";
        };

        useCurrentAddressCheckbox.addEventListener("change", () => {
            if (useCurrentAddressCheckbox.checked) {
                // Populate fields with the current address
                populateAddress();
            } else {
                // Clear the fields if the checkbox is unchecked
                nameInput.value = '';
                emailInput.value = '';
                phoneInput.value = '';
                cityInput.value = '';
                stateInput.value = '';
                pincodeInput.value = '';
                countryInput.value = '';
            }
        });
    </script>
</body>
</html>
